<html>
<head>
<title>AFD (mon_ctrl.html)</title>
</head>
<body bgcolor="#F0ECD6">
<h1 align=center><a name="mon_control">MON Control</a></h1>
<hr size=3 noshade>
<p>
To control and monitor remote AFDs there is an X11 interface, with the
following appearance:
</p>
<center><img src="../images/mon_ctrl_labeled.png" alt="[image of labeled mon_ctrl dialog]"></center>
<p>
As shown this dialog is divided into three main areas: menu, heading
and status.
</p>
<h3><center><a name="menu"><u>Menu</u></a></center></h3>
<p>
The menu area has four pull down buttons: Monitor, RView, RControl and Setup.
If your mon_ctrl window does not have all buttons shown and described here,
then the system administrator did not allow you to use this function.
</p>
<img align=left src="../images/monitor_popup.png">
<ul>
   <li><b>System Log</b> allows you to view the system log of the
       afd_mon process.</li>
   <li>The dialog <b>Monitor Log</b> shows the log entries of any major
       activity of the remote AFD. Such as loosing the connection or
       a shutdown of the AFD.</li>
   <li>If the remote AFD is red and the connection is back again it
       might take more then two minutes before afd_mon retries. To
       speed this up manually, press the <b>Retry</b> button.</li>
   <li><b>Test</b> the connection to the selected AFD. Currently only
       the ping and traceroute tests have been implemented.</li>
   <li>The <b>Info</b> button opens the <a href="mon_info.html">mon_info
       dialog</a> for this AFD.</li>
   <li><b>Exit</b> will close the mon_ctrl window and all other windows that
       have been started from this dialog. It does not effect any of the
       main process of afd_mon running in the background.</li>
</ul>
<br clear=left>
<br>
<img align=left src="../images/rview_popup.png" alt="[rview popup]">
<ul>
   <li><b>AFD Control</b> opens the <a href="afd_ctrl.html">afd_ctrl</a>
        dialog, for the selected AFD.</li>
   <li><b>System Log</b> opens the <a href="show_log.html#system">
        system dialog</a> of the selected AFD. See
	<a href="log.html#system_log">Log Files</a> for a more detailed
	description of the output.</li>
   <li><b>Transfer Log</b> opens the <a href="show_log.html#transfer">
        transfer dialog</a>. See <a href="log.html#transfer_log">Log Files</a>
	for a more detailed description of the output.</li>
   <li><b>Input Log</b> opens the <a href="show_ilog.html">
        input dialog</a>. See <a href="log.html#input_log">Log Files</a> for
        a more detailed description of the output.</li>
   <li><b>Output Log</b> opens the <a href="show_olog.html">
        output dialog</a>. See <a href="log.html#output_log">Log Files</a> for
        a more detailed description of the output.</li>
   <li><b>Delete Log</b> opens the <a href="show_dlog.html">
        delete dialog</a>. See <a href="log.html#delete_log">Log Files</a> for
        a more detailed description of the output.</li>
   <li><b>Load</b> shows the current load of either: Files send per second,
        KBytes second per second, Connections done per second and the
        number of Active-Transfers.</li>
</ul>
<br clear=left>
<br>
<img align=left src="../images/control_popup.png" alt="[control popup]">
<ul>
   <li><b>Start/Stop AMG</b> starts or stops the <a href="amg.html">AMG</a>.
       Stopping the AMG means that no more messages will be generated for
       the FD.</li>
   <li><b>Start/Stop FD</b> starts or stops the <a href="fd.html">FD</a>.
       Stopping the FD should only be done for a short time on systems with
       lots of traffic. Otherwise the AMG keeps generating messages until
       the file system is full or it cannot create any new directories to
       store the files.</li>
   <li>When there have been any changes made in the DIR_CONFIG file and
       these changes should be activated, press <b>Reread DIR_CONFIG</b>.
       If there where any changes in the HOST_CONFIG file it will
       incorporate these changes as well. So it is not necessary to
       press the Reread HOST_CONFIG button.</li>
   <li>To activate changes made in the HOST_CONFIG file by hand (not
       using the edit_hc dialog), press the <b>Reread HOST_CONFIG</b>
       button.</li>
   <li><b>Edit Host</b> opens the <a href="edit_hc.html">edit_hc</a>
       dialog.</li>
   <li><b>Startup AFD</b> allows to start all processes of the AFD.</li>
   <li>Whereas <b>Shutdown AFD</b> will stop all process of the AFD.</li>
</ul>
<br clear=left>
<br>
<img align=left src="../images/setup_popup.gif" alt="[setup popup]">
<ul>
   <li>Pressing <b>Font size</b> will give you a list of fonts which,
       when selected, will be used for the afd_ctrl window and all other
       windows called from it.</li>
   <li><b>Number of rows</b> allows to change the maximum number of rows
       to be displayed for one column.</li>
   <li><b>Line Style</b> allows to change the appearance of a single line.
       You can currently choose three different items: Bars only, Characters
       only and Characters and bars (default).</li>
   <li><b>Save Setup</b> will save the above settings in the file
       .afd_ctrl.setup.$DISPLAY in the users home directory. So when you start
       afd_ctrl again it will start with these settings.</li>
</ul>
<br clear=left>
<br>
<h3><center><a name="heading"><u>Heading</u></a></center></h3>
<center><img src="../images/mon_ctrl_head.png" alt="[closeup of mon_ctrl header line]"></center>
<p>
The heading is just a quick reminder of what the fields in the
connection area mean:
</p>
<table>
<tr>
   <th>AFD</th>
   <td>The alias name of the AFD that is being monitored.</td>
</tr>
<tr>
   <th>fc</th>
   <td>This is the file counter field. It shows the total number files that
       are still to be distributed.</td>
</tr>
<tr>
   <th>fs</th>
   <td>The total file size that is still to be distributed.</td>
</tr>
<tr>
   <th>tr</th>
   <td>Shows the overall current transfer rate.</td>
</tr>
<tr>
   <th>fr</th>
   <td>Shows the overall current file rate in files per second.</td>
</tr>
<tr>
   <th>jq</th>
   <td>The number of jobs in the queue.</td>
</tr>
<tr>
   <th>at</th>
   <td>The total numbers of active transfers.</td>
</tr>
<tr>
   <th>ec</th>
   <td>This is the total number of errors. It does NOT count
       the errors of a host that is red.</td>
</tr>
<tr>
   <th>eh</th>
   <td>This is the total number of hosts that are red.</td>
</tr>
</table>
<h3><center><a name="status"><u>Status</u></a></center></h3>
<p>
The status area is the actual area which monitors and controls the
other AFD's.  The meaning of each field is shown below:
</p>
<center><img src="../images/mon_ctrl_line.png" alt="[closeup of one line of mon_ctrl dialog]"></center>
<table border>
<tr>
   <td><b>1</b></td>
   <td>AFD alias</td>
   <td>This field holds the name of the AFD alias. The background
       color indicates the current status of the connection:
       <table>
       <tr>
          <td><center><img src="../images/normal_afd.png"></center></td>
          <td>Connected to remote AFD. Normal status.</td>
       </tr>
       <tr>
          <td><center><img src="../images/connecting_afd.png"></center></td>
          <td>Connecting phase.</td>
       </tr>
       <tr>
          <td><center><img src="../images/error_afd.png"></center></td>
	  <td>Error. The connection to this AFD is broken or it has
	      been shut down.</td>
       </tr>
       <tr>
          <td><center><img src="../images/disabled_afd.png"></center></td>
	  <td>This AFD is disabled. afd_mon will not monitor this AFD.</td>
       </tr>
       </table>
   </td>
</tr>
<tr>
   <td><b>2</b></td>
   <td>AMG</td>
   <td>LED to show current status of process AMG (Automatic Message
       Generator).
       <table border>
       <tr>
          <td><img src="../images/led-yellow.gif"></td>
          <td>Normal status. Process is up and running.</td>
       </tr>
       <tr>
          <td><img src="../images/led-tomato.gif"></td>
          <td>Process has terminated normally.</td>
       </tr>
       <tr>
          <td><img src="../images/led-blink.gif"></td>
          <td>Abnormal termination. Process has been killed and is
              not running any more.</td>
       </tr>
       </table>
       <b>NOTE: This LED must be <img src="../images/led-yellow.gif"> so
                that the AFD can function properly.</b>
    </td>
</tr>
<tr>
   <td><b>3</b></td>
   <td>FD</td>
   <td>LED to show current status of process FD (File Distributor).
       <table border>
       <tr>
          <td><img src="../images/led-yellow.gif"></td>
          <td>Normal status. Process is up and running.</td>
       </tr>
       <tr>
          <td><img src="../images/led-tomato.gif"></td>
          <td>Process has terminated normally.</td>
       </tr>
       <tr>
          <td><img src="../images/led-blink.gif"></td>
          <td>Abnormal termination. Process has been killed and is
              not running any more.</td>
       </tr>
       </table>
       <b>NOTE: This LED must be <img src="../images/led-yellow.gif"> so
                that the AFD can function properly.</b>
    </td>
</tr>
<tr>
   <td><b>4</b></td>
   <td>Archive Watch</td>
   <td>LED to show current status of process Archive Watch.
       <table border>
       <tr>
          <td><img src="../images/led-yellow.gif"></td>
          <td>Normal status. Process is up and running.</td>
       </tr>
       <tr>
          <td><img src="../images/led-tomato.gif"></td>
          <td>Process has terminated normally.</td>
       </tr>
       <tr>
          <td><img src="../images/led-red.gif"></td>
          <td>Abnormal termination. Process has been killed and is
              not running any more.</td>
       </tr>
       </table>
    </td>
</tr>
<tr>
   <td><b>5</b></td>
   <td>System Log</td>
   <td>Radar that shows the five last type of messages in the system log. It
       can have the following colors: <IMG SRC="../images/radar.png">
       <table border>
       <tr>
          <th>Color</th>
          <th>Log Symbol</th>
          <th>Description</th>
       </tr>
       <tr>
          <td align=center><img src="../images/info.png"></td>
          <td align=center>&lt;I&gt;</td>
          <td>Information, nothing serious.</td>
       </tr>
       <tr>
          <td align=center><img src="../images/config.png"></td>
          <td align=center>&lt;C&gt;</td>
          <td>Configuration, something has been configured.</td>
       </tr>
       <tr>
          <td align=center><img src="../images/warn.png"></td>
          <td align=center>&lt;W&gt;</td>
          <td>Warning. Most properly a configuration error, nothing to
              be nervous about.</td>
       </tr>
       <tr>
          <td align=center><img src="../images/error.png"></td>
          <td align=center>&lt;E&gt;</td>
          <td>Error, AFD should still be able to continue, but something
	      is wrong!</td>
       </tr>
       <tr>
          <td align=center><img src="../images/fatal.png"></td>
          <td align=center>&lt;F&gt;</td>
          <td>A fatal error has occurred, the process involved has most
	      properly terminated abnormally. Now you should really be
	      nervous!</td>
       </tr>
       <tr>
          <td align=center><img src="../images/dummy.png"></td>
          <td align=center>&lt;#&gt;</td>
          <td>Dummy sign. Is used for showing a new month in the system
	      log or when there is garbage in the log file.</td>
       </tr>
       </table>
   </td>
</tr>
<tr>
   <td><b>6</b></td>
   <td>File Counter</td>
   <td>Total number of files that still have to be send.</td>
</tr>
<tr>
   <td><b>7</b></td>
   <td>File Size</td>
   <td>Total number of bytes that still have to be send. The last
       character always shows the current unit: B for Bytes, K for
       Kilo Bytes, M for Mega Bytes, G for Giga Bytes and T for Tera
       Bytes.</td>
</tr>
<tr>
   <td><b>8</b></td>
   <td>Transfer Rate</td>
   <td>Displays the total current transfer rate of all connections.</td>
</tr>
<tr>
   <td><b>9</b></td>
   <td>File Rate</td>
   <td>Displays the total number of files send per second.</td>
</tr>
<tr>
   <td><b>10</b></td>
   <td>Jobs in Queue</td>
   <td>Displays the number of jobs in the queue.</td>
</tr>
<tr>
   <td><b>11</b></td>
   <td>Active Transfers</td>
   <td>The number of process currently distributing data.</td>
</tr>
<tr>
   <td><b>12</b></td>
   <td>Error Counter</td>
   <td>Number of errors that occurred. It does not include the errors
       of red hosts (ie. failed hosts), otherwise the numbers here would
       get so large that one does not see if a new one starts to get
       errors.</td>
</tr>
<tr>
   <td><b>13</b></td>
   <td>Error Hosts</td>
   <td>Number of hosts that are red.</td>
</tr>
<tr>
   <td><b>14</b></td>
   <td>Error Host Bar</td>
   <td>Displays a bar for the number of hosts that are red. The
       color of the bar will always be red.</td>
</tr>
<tr>
   <td><b>15</b></td>
   <td>Active Transfers Bar</td>
   <td>Displays a green bar to display the number of active transfers,
       that will increasingly turn blue the more transfers are active.
       A deep blue bar in it full length indicates that the FD has
       reached its maximum number of process that may be forked to
       distribute data.</td>
</tr>
<tr>
   <td><b>16</b></td>
   <td>Transfer Rate Bar</td>
   <td>Displays a yellow bar to display the overall current transfer rate
       graphically.</td>
</tr>
</table>
<p>
Selecting can be done by either holding down the shift key and pressing the
left mouse button (temporary selection) or by holding the ctrl key and the
left mouse button (permanent selection). The background of the line will
change to black or grey respectively.
</p>
<hr size=3 noshade>
<table width=100%>
<tr>
   <td width=90%><small><address>
   Copyright &copy; 2000, 2001 by H.Kiehl<br>
   <a href="mailto:Holger.Kiehl@dwd.de?subject=AFD Homepage">Holger.Kiehl@dwd.de</a><br>
   Last updated: 04.06.2001
   </address></small></td>
   <td nowrap><small><img align=middle src="../images/reddot.gif" alt="[red dot]"><a href="contents.html">Index</a></small></td>
   <td nowrap><small><img align=middle src="../images/reddot.gif" alt="[red dot]"><a href="index.html">Home</a></small></td>
   <!-- Insert site specific logo -->
</tr>
</table>
</body>
</html>
