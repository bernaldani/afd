<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>AFD (file_going_through_afd.html)</title>
</head>
<body bgcolor="#F0ECD6">
<h1 align=center><a name="file_going_through_afd">What happens when a file goes through AFD</a></h1>
<hr size=3 noshade>
<p>
The following figures will show what happens when a file AAAA goes
through AFD.
</p>
<center><img src="../images/amg_fd_en_1.gif"></center>
<p>
The file AAAA coming into the source directory /input_directory,
gets detected by process AMG.
</p>
<center><img src="../images/amg_fd_en_2.gif"></center>
<p>
AMG then creates a temporary unique directory named
$AFD_WORK_DIR/files/pool/4d25ab69_4b31_0_2ccc98b1. It then moves AAAA
into this directory. If /input_directory and $AFD_WORK_DIR/files/pool
are not in the same file system the file AAAA is copied. Copying is more
expansive, thus try to install AFD there where the data is, that is in the
same filesytem.
</p>
<center><img src="../images/amg_fd_en_3.gif"></center>
<p>
Since the file is to be send to two seperate destinations, AMG creates
two 'outgoing' directories $AFD_WORK_DIR/files/outgoing/1a31a7cd/0/4d258b12ca_0
and $AFD_WORK_DIR/files/outgoing/1a31a7cd/0/4d258b12cd_0. The file is AAAA
is then hardlinked from the pool directory to these two directories.
</p>
<center><img src="../images/amg_fd_en_4.gif"></center>
<p>
Now AMG has setup everything and informs via the FIFO $AFD_WORK_DIR/fifodir/msg.fifo
the process FD that there are two jobs ready for being distributed.
</p>
<center><img src="../images/amg_fd_en_5.gif"></center>
<p>
The information what FD needs to do with these two jobs is read from
the message files in $AFD_WORK_DIR/messages.
</p>
<center><img src="../images/amg_fd_en_6.gif"></center>
<p>
This data is then used by FD to create two process sf_ftp that now send
the files from $AFD_WORK_DIR/files/outgoing to customer A and B.
</p>
<hr size=3 noshade>
<table width="100%">
<tr>
   <td width="90%"><small><address>
   Copyright &copy; 2013 by H.Kiehl<br>
   <a href="mailto:Holger.Kiehl@dwd.de?subject=AFD Homepage">Holger.Kiehl@dwd.de</a><br>
   Last updated: 24.11.2013
   </address></small></td>
   <td nowrap><small><img align=middle src="../images/reddot.gif" alt="[red dot]"><a href="contents.html">Index</a></small></td>
   <td nowrap><small><img align=middle src="../images/reddot.gif" alt="[red dot]"><a href="index.html">Home</a></small></td>
   <!-- Insert site specific logo -->
</tr>
</table>
</body>
</html>
