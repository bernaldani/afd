

                               Version 1.3.x
                               =============

----------------------------> Version 1.3.0 <------------------------------
                             ---------------
04.02.2001 - Fork from 1.2.4.
15.08.2002 - Option to ignore files which have a certain size.
25.08.2002 - Added rename logging.
26.09.2002 - Automatic conversion of FSA when version changes.
13.10.2002 - Increase the standard I/O-buffer of all log programms
             to 262144 Bytes, to hopefully increase the disk utilization.
           - Added support for controlling the transfer rate per host.
30.10.2002 - Tell FD the producer of a message so we can save us the
             unlink() in archive_file().
05.01.2003 - Make the lock file configurable under the options entry.
07.02.2003 - The maximum number of files and size copied in one go is
             now configurable per directory under dir options.
15.02.2003 - Added new program grib2wmo to convert grib files to WMO
             container files.
21.02.2003 - The number of bytes send stored in statistics now also
             include those when file is only send partly.
           - Put in a version number in statistics database.
23.02.2003 - Added input statistics to afd_stat process.
02.03.2003 - Added program to show input statistics.
12.03.2003 - Added more CCCC's to wmoheader_from_grib() function.
14.03.2003 - afd_ctrl dialog now shows a history log of receive, system
             and transfer log at the bottom.
16.03.2003 - Support for having multiple DIR_CONFIG files.
26.04.2003 - Function trans_log() and trans_db_log() now take an
             additional argument so it is no longer necessary to always
             set first character of msg_str to 0.
29.04.2003 - Added functions fsa_attach_passive() and fra_attach_passive()
             to attach to the respective areas in read only mode. So that
             process that only read do not need the SUID flag set.
02.05.2003 - Password is now stored in a separate file.
10.07.2003 - AFD monitor can now also use ssh conections.
           - Added options field in AFD_MON_CONFIG to enable for example
             compression for ssh.
31.07.2003 - MSA now stores the number of jobs configured.
16.08.2003 - Added options to start using the given directory when a
             certain file has arrived and/or a certain number of files
             and/or the files in the directory have a certain size.
03.12.2003 - Added option to disconnect connection for AFD monitor.
20.12.2003 - If host switching is possible, save the HOST number of the
             active host in the HOST_CONFIG file.
           - Added search option for dir_ctrl and mon_ctrl dialogs.
26.12.2003 - Added tracing.
27.12.2003 - Fix fifo buffer overflow problem for system_log, mon_sys_log
             and trans_db_log process.
31.12.2003 - Remove limit for file mask by not storing them in the JID
             structure but a separate file.
04.01.2004 - Failed to reliably detect when a directory was no longer
             needed. Fixed.
05.01.2004 - Also store the original directory name as it is stored
             in DIR_CONFIG.
06.01.2004 - Store each DIR_CONFIG name and directory that was or is
             being used.
10.01.2004 - Added optional fast FTP renaming.
           - Remove check_reply() from ftpcmd.c and smtpcmd.c.
01.02.2004 - Implemented TLS/SSL authentification for FTP control
             connection.
03.03.2004 - Create target directory for sf_loc if it does not exist.
29.03.2004 - Dialogs no longer always have SYSTEM_LOG open.
03.04.2004 - Show CPU usage for exec options.
04.04.2004 - Implemented TLS/SSL authentification for FTP data
             connection.
17.04.2004 - When calling edit_hc from afd_ctrl, pass on the first
             selected host.
21.04.2004 - Implemented fast cd for FTP.
24.04.2004 - Implement HTTP and HTTPS protocol for fetching data.
29.04.2004 - Chunked downloads implemented for HTTP.
01.05.2004 - Option to initialize AFD.
13.06.2004 - Improved transfer rate limit and implemented it for all
             protocols.
27.06.2004 - Added error history.
07.08.2004 - Raise window and set focus when it is called again. This
             currently works only for local dialogs.
28.08.2004 - Implemented create remote directory if target directory
             does not exist.
01.09.2004 - show_olog and show_ilog can now show logs continuesly as
             files arrive.
02.09.2004 - Added new directory option "ignore file time" to allow
             for AFD to pick up files that have a certain age or not
             to send files that are to old.
04.09.2004 - In AFD_CONFIG it is now possible to add a timeout for the
             exec and trans_exec options.
07.10.2004 - Function ftp_move() now creates the missing target
             directory if it does not exist on demand.
28.11.2004 - New [dir option] "delete old locked files" to remove old
             locked files.
18.12.2004 - Improve speed of show_olog dialog.
22.12.2004 - Improve speed of show_ilog and show_dlog dialog.
22.01.2005 - Implemented bursting for sf_wmo and sf_scp.
           - Widen internal structures to accomodate more protocols.
25.01.2005 - When starting queue do not automatically start the
             AUTO_PAUSE_QUEUE_STAT.
29.01.2005 - Exec option now takes parameters.
31.01.2005 - Teached fd not to burst if the port numbers differ.
06.02.2005 - Standalone dialog to send files with aftp and asmtp.
07.02.2005 - Added sending files from AFD queue with show_queue dialog.
09.02.2005 - Additional time entry structure in FRA to enable alarm
             times for directories.
           - Implemented central info file afd_info and mon_info dialog.
11.02.2005 - Implemented 'error actions'. If a host becomes red and
             in $AFD_WORK_DIR/etc/error_actions there is a script with
             the hostname this will be called with the parameter 'start'.
             If the error condition whent away it will be called with the
             parameter 'stop'.
12.02.2005 - Fixed blinking error of AMG when shutting down AFD.
13.02.2005 - Added option to view all logs in show_log dialog.
           - Added search field in show_log dialog.
27.02.2005 - Increase history length for receive, system and transfer
             log to 48 hours.
           - Option to initialize AFD_MON.
           - Allow user to specify -Y option instead of -X for AFD_MON
             when it calls remote X programs via ssh.
           - Added switching AFD's in AFD_MON and mon_ctrl.
09.04.2005 - trans_log() failed to add a newline under certain
             conditions.
           - receive_log failed to detect to long lines and could crash.
           - Added a new case for deleting a file when overwriting is
             not permitted in ftpcmd().
           - Added more number of rows for afd_ctrl and mon_ctrl.
10.04.2005 - Automatically convert ls data format from 1.2.x to 1.3.0.
           - Implemented alternating numbers for load distribution.
14.04.2005 - Fix message fifo overflow bug in FD.
           - transfer_log failed to detect to long lines and could crash.
           - When all process for AMG are in use continue to process
             directories that are in the same filessystem and do not
             have the exec option set.
22.04.2005 - Implemented enabling/disabling certain features on a per
             host basis for afd_ctrl dialog.
23.04.2005 - Program afd and init_afd now use the heartbeat counter to
             detect if init_afd is still alive. This solves problems
             when using shared disks or GPFS.
28.04.2005 - Implemented enabling/disabling certain features on a per
             host basis for mon_ctrl dialog.
02.05.2005 - change_name() does not check if the filter ends and the
             filename matches so far that this mist be also the end
             of the filename. Having the rule "*_1 *" and the name
             a_1_222_1 would result in "a" and not "a_1_222". Fixed.
15.05.2005 - Fix sending files by mail with xsend_file dialog via
             show_olog and show_queue.
18.05.2005 - Added new options sohetx, wmo and sohetxwmo to convert
             option.
08.06.2005 - When searching for next file group in DIR_CONFIG we did
             not check if this was commented out. Fixed.
17.06.2005 - lookup_dir_id() always had one byte for CRC calculation
             that was not initialized, thus always generating different
             CRC's for the same directory name.
25.06.2005 - Added --enable-group_can_write to configure to enable
             group write access to fifo. This makes setuid bit for
             some layouts unnecessary.
01.07.2005 - If no configuration is found install some defaults.
           - Workaround for IIS FTP-server bug, disabled by default.
16.07.2005 - Made old_file_time and delete_files_flag configurable
             via AFD_CONFIG.
19.07.2005 - show_log with older Motif version did not show logs
             continuesly. Fixed.
28.07.2005 - Make init script more LSB conform.
16.08.2005 - Added option "extract ASCII".
18.08.2005 - Option extract does now put a CRC32 checksum in hexa at
             the end of the filename instead of an arbitary 4 digit
             number.
------------------------> Released: 18.08.2005 <---------------------------



----------------------------> Version 1.3.1 <------------------------------
                             ---------------
30.08.2005 - Added option DEFAULT_SMTP_SERVER in AFD_CONFIG to specify
             a default SMTP server where mails are being send.
           - Added option DEFAULT_SMTP_FROM in AFD_CONFIG to specify
             what is put into the from line of a mail.
05.09.2005 - eaccess() is now able to handle multiple users per group.
10.09.2005 - sf_ftp did not show the reply buffer under certain error
             conditions.
13.09.2005 - Handle the error case 'connection reset by peer' better.
14.09.2005 - At a certain point error jobs will now age much more
             quickly the more retries there have been.
19.09.2005 - If we fail to open system log fifo set file descriptor to
             STDERR_FILENO.
           - When --enable-setuid_progs is set, the program udc must
             also have the SETUID bit set.
21.09.2005 - Added option "sequence locking".
           - When updating DIR_CONFIG and a retrieving job has been
             removed, it could happen that other retrieving jobs that
             terminate would write to the wrong position in FRA.
22.09.2005 - sf_xxx deleted files that had dates in the future when
             age limit was set. Fixed.
24.09.2005 - Increase speed for initial visualising of afd_ctrl and
             mon_ctrl dialog.
02.10.2005 - Dialog dir_info now shows all directory options.
03.10.2005 - Function check_fra_fd() incremented a wrong variable when
             a retrieve job was removed. Fixed.
           - If we kill a retrieve job that has just been removed from
             DIR_CONFIG, remove its zombie too.
05.10.2005 - In FRA remember what was in DIR_CONFIG. This helps
             to make a better reconstruction of DIR_CONFIG with command
             line tool get_dc_data.
09.10.2005 - When doing a scp transfer, show correct colors in job
             details dialog.
10.10.2005 - Function get_dir_options() would some times list every
             single minute, instead of a single *. Fixed.
15.10.2005 - Option to force a rescan of a directory where time option
             is set in [dir options] in afdcmd and dir_ctrl.
16.10.2005 - Font for menu 'Search + (De)Select' was not changed when
             we changed the font for the dir_ctrl dialog.
           - New parameter for afdcmd to enable/disable a directory.
17.10.2005 - Added event handler to error host list in mon_ctrl dialog
             to close this list if we click on it or move mouse cursor
             away from it.
           - Dialog show_ilog can now also search for files that are
             retrieved from a remote host.
28.10.2005 - New AFD_CONFIG option REMOVE_UNUSED_HOSTS to remove unused
             hosts from the FSA.
08.11.2005 - Fix a bug where show_ilog crashes on a 64 bit system.
           - For acceleration keys in afd_ctrl, dir_ctrl and mon_ctrl
             dialog allow user to change Alt+<Key> combination to
             Ctrl+<Key> with the configure option:
                  --enable-with_ctrl_accelerator
14.11.2005 - Update next check time in FD even when retrieving is
             disabled.
21.11.2005 - In check_file_dir() check if the directory actually
             contains files. If not just silently (just debug) delete
             the directory.
22.11.2005 - From dir_ctrl dialog selecting one or more directories
             will now showup in show_ilog, show_olog and show_dlog
             dialog.
           - In httpcmd.c we may not send an empty line in the HTTP
             header. This always happens if there is no authentification.
             Fixed.
24.11.2005 - Sometimes some jobs get handled twice by FD. This is because
             there is a small timeframe where both FD and AMG think they
             are the only process in control of the message queue. This
             is hopefully fixed by adding more locking at critical
             moments.
28.11.2005 - When attaching to FSA or FRA we do not check if the
             current code is able to handle the stored version. This
             should catch the case when someone uses new binaries
             without restarting AFD or mixing old and new binaries.
29.11.2005 - With rename option when files would overwrite each other
             AFD would per default append a ; and a number to the name.
             The ';' has now been changed to a '-'. Reason is that
             some FTP-servers do not allow this and under *nix is
             a bit odd to handle.
30.11.2005 - When opening job details window, do not resize the main
             window, just the popup window.
06.12.2005 - Some Motif versions need -lXp, configure should now detect
             this. This is needed for debian with openmotif.
07.12.2005 - If we try send the data from some log output to some email
             address and we fail because we do not have write permission,
             retry this time using /tmp.
           - asmtp failed to separate mail header from message body.
             Fixed.
08.12.2005 - When calling remote commands via mon_ctrl, make full path
             to the rafdd_cmd/rafdd_cmd_ssh script optional.
------------------------> Released: 08.12.2005 <---------------------------



----------------------------> Version 1.3.2 <------------------------------
                             ---------------
15.12.2005 - When specifying a / in time option in any of the possible
             field, except for min field, could lead to AMG going into
             an endless loop.
18.12.2005 - Function check_permission() may not write to system_log.fifo,
             it may deadlock because process system_log is not running.
22.12.2005 - Selecting one or more directories in dir_ctrl dialog will
             now also show up in show_queue dialog.
01.01.2006 - When storing an old year catch the case when clock goes back
             one second (leap second).
02.01.2006 - Made handling of pty devices more compatible with more
             systems.
06.01.2006 - Empty pool directories are not deleted because we failed
             to take into account that the directory ID was written in
             hex. Fixed.
           - The view_dc dialog now shows the correct directory options
             again.
           - The tool get_dc_data can now show directory options.
08.01.2006 - Don't check each possible return string after we entered
             the password for a SSH connection.
           - When enabling traceing, don't show the password for SSH
             connections.
           - Made trans_log more robust when we encounter unprintable
             characters.
           - AFD now compiles again with configure option --with-gui=none.
10.01.2006 - Fix the error in show_ilog and show_dlog dialog when specifying
             no directory and not showing any data.
17.01.2006 - In mon_ctrl if we have auto switching and a switch takes
             place, kill any open windows to this host.
24.01.2006 - Fix a bug in function eaccess() that could lead to a crash
             of AFD.
26.01.2006 - Make the number of process that may connect to afdd
             configurable in AFD_CONFIG (via MAX_AFDD_CONNECTIONS).
29.01.2006 - Support for SFTP, sending only.
10.02.2006 - Process sf_ftp could crash during a debug session when it
             was deleting previous old temp/dot files. Fixed.
12.02.2006 - Added possibility to not set type image when doing FTP
             transfers.
18.02.2006 - Option to set socket send and receive buffer.
20.02.2006 - Enabling directory from dir_ctrl dialog works again.
22.02.2006 - Enabling/disabling an AFD in mon_ctrl works again.
23.02.2006 - Fix error in ETR_SOCKET_NSL M4-macro which used CFLAGS
             instead of LIBS.
           - Startup/Shutdown afd did not work when fake user was used.
24.02.2006 - Added check for whether the compiler provides a working
             long long.
02.03.2006 - Fixed another error in the function that evaluates the time
             entry, which could lead to AMG going into an endless loop.
06.03.2006 - Do not give a user full permission if afd.users file exists
             but user cannot read the file for whatever reason.
09.03.2006 - Support for duplicate checks on a per host basis.
           - In function check_files() we must remove a CRC from
             the dupcheck list if we fail to pickup the file.
15.03.2006 - When checking if files in the input directory have the
             correct permissions, we failed to check for supplementary
             groups.
16.03.2006 - Implemented group transfer limit.
21.03.2006 - When doing pexec show what command we currently execute
             in the job details window.
28.03.2006 - For option pexec show in TRANSFER_LOG what we are doing
             and how long it took to execute the command.
29.03.2006 - Support for file filters with time modifiers.
01.04.2006 - Process FD may not perform a file dir check when process
             dir_check has queued messages.
05.04.2006 - Dialog show_queue sometimes showed wrong data or even
             crashed, because it was using a variable wrong. Fixed.
06.04.2006 - Hopefully improved SSH/SCP login procedure.
07.04.2006 - Fixed some errors in grib2wmo options.
           - Initializing AFD or AFD_MON should only delete files
             belonging to them.
11.04.2006 - For protocol SCP and when we are doing a burst we must
             also check if the target directories are the same. Since
             SCP protocol does not support changing directories.
19.04.2006 - Dialog dir_info, show_ilog, show_olog, show_dlog and
             show_queue did not work when fake user was used from
             dir_ctrl.
           - The option tiff2gts can now handle other TIFF files with
             WMO headers not only DWD special scanner files. Thanks
             to Laurentiu BROJBOIU!
           - Fix some errors in show_ilog dialog not showing any or
             all data.
------------------------> Released: 20.04.2006 <---------------------------



----------------------------> Version 1.3.3 <------------------------------
                             ---------------
21.04.2006 - When converting the FSA, the memory used must be initialized.
22.04.2006 - Added sendfile() support for FTP. Currently only tested
             for linux.
24.04.2006 - When setting "delete unknown files" to zero, the function
             search_old_files() could delete files that are to be
             distributed. Fixed.
04.05.2006 - Setting FTP type ASCII or BIN had no effect. Fixed.
09.05.2006 - Implemented fetching via SFTP.
12.05.2006 - Handle rename.rule files that do not start with an empty
             line at start correctly.
13.05.2006 - Fix two errors in time expansion function for pattern
             matching.
18.05.2006 - Do not burst when users are not the same and protocol
             is SFTP.
25.05.2006 - It is now possible to view DIR_CONFIG data from the dir_ctrl
             dialog.
04.06.2006 - Added email option 'file name is target'.
10.06.2006 - Delete log knows more different delete types.
11.06.2006 - Dialog show_queue can now handle retrieve jobs.
19.06.2006 - Speedup host listing in edit_hc dialog.
           - In dialog edit_hc adapt length of host alias list when
             MAX_HOSTNAME_LENGTH is changed.
20.06.2006 - Adapt length of show_olog and show_dlog dialog when
             MAX_HOSTNAME_LENGTH is changed.
21.06.2006 - When list limit is reached, don't show the search time
             otherwise the warning showing that list limit is reached
             will be overwritten.
           - Fix an error when sf_xxx delete a file and this was
             shown with garbage in delete log.
26.06.2006 - When rereading DIR_CONFIG reset protocol flags, otherwise
             protocols will accumulate until AMG is restarted.
27.06.2006 - When downloading a file with leading dot remove the dot
             when finish downloading.
           - Optionally allow for duplicate directories when the
             directories are in different DIR_CONFIGS (configure with
             --enable-multi_dir_definition).
30.06.2006 - Added directory option 'accept dot files', so files with
             a leading dot can be downloaded from a remote host.
04.07.2007 - When we delete old files from the queue we must subtract
             those from the queued files in FRA.
           - When opening an afd_ctrl dialog via mon_ctrl it was not
             possible to open the dir_ctrl dialog via mon_ctrl. Fixed.
------------------------> Released: 05.07.2006 <---------------------------
